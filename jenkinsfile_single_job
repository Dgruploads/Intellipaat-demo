pipeline {
  agent any

  stages {
    stage ("Build the maven war package") {
      steps {
        node ("build_server") {
          
          //Checkout the SCM
          print ("Downloading the source code from GitHub")
          checkout scmGit(
            branches: [[name: '*/maven_branch']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/Dgruploads/intellipaat-demo.git']]
          )
          
          //Delete and create a new war package
          print ("Delete the old maven package")
          print ("Creating new maven package")
          sh "mvn clean install"

          //Stash the war apackage
          //print ("Preparing the war package to copy to the deploy server")
          //stash( includes:"/home/ubuntu/build_server/workspace/single_job_pipeline/target/hello-world-webapp.war"
        }
      }
    }
  }
}
